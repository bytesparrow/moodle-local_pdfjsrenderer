{"version":3,"file":"reader.min.js","sources":["../src/reader.js"],"sourcesContent":["// Standard license block omitted.\n/*\n * @module     block_overview/helloworld\n * @copyright  2015 Someone cool\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as pdfjsLib from 'pdfjs-dist/build/pdf';\n//import pdfjsWorker from 'pdfjs-dist/build/pdf.worker';\n//import * as pdfjsLib from 'pdfjs-dist/build/pdf';\n//import PDFJSWorker from 'pdfjs-dist/build/pdf.worker';\nimport html5pdf from 'local_pdfjsrenderer/html5pdf';\nimport scrollview from 'local_pdfjsrenderer/scrollview';\n\n\n\nexport const create = (parameters) => {\n\n    //nicht schön, sollte auch als import gehen, aber läuft halt so...\n    pdfjsLib.GlobalWorkerOptions.workerSrc = M.cfg.wwwroot + \"/local/pdfjsrenderer/vendorjs/pdfjs/pdf.worker.js\";\n\n    parameters.pdfjslib = pdfjsLib;\n    //window.console.debug(parameters);\n    let html5pdfobject = new html5pdf(parameters);\n    //todo: add callbacks / functions\n    html5pdfobject.loadPDF(function () { }, function () { });\n\n\n    /*bind created controls to actions*/\n    if (parameters.html_next_id) {\n        document.getElementById(parameters.html_next_id).addEventListener('click', function () {\n            html5pdfobject.pageUp();\n        });\n    }\n    if (parameters.html_prev_id) {\n        document.getElementById(parameters.html_prev_id).addEventListener('click', function () {\n            html5pdfobject.pageDown();\n        });\n    }\n    if (parameters.html_zoomin_id) {\n        document.getElementById(parameters.html_zoomin_id).addEventListener('click', function () {\n            html5pdfobject.zoomIn();\n        });\n    }\n    if (parameters.html_zoomout_id) {\n        document.getElementById(parameters.html_zoomout_id).addEventListener('click', function () {\n            html5pdfobject.zoomOut();\n        });\n\n    }\n\n    //jquery-scrollview in normale class konvertiert\n    scrollview.initialize(\"#\" + parameters.html_pdfscrollcontainer_id);\n\n\n\n    //Dies führt zu einem Fehler\n    //Uncaught TypeError: (void 0) is undefined\n    //Liegt daran, dass this.renderer_list nicht initialisiert ist\n    this.renderer_list[parameters.pdffileid] = html5pdfobject;\n};\n\n/**\n * returns a previously generated pdf-reader-object\n * @param {string} pdffileid Fileid of the reader\n * @returns js-object\n */\nexport const get = (pdffileid) => {\n    return this.renderer_list[pdffileid];\n};"],"names":["parameters","pdfjsLib","GlobalWorkerOptions","workerSrc","M","cfg","wwwroot","pdfjslib","html5pdfobject","html5pdf","loadPDF","html_next_id","document","getElementById","addEventListener","pageUp","html_prev_id","pageDown","html_zoomin_id","zoomIn","html_zoomout_id","zoomOut","initialize","html_pdfscrollcontainer_id","renderer_list","pdffileid"],"mappings":";;;;;4HAgBuBA,aAGnBC,SAASC,oBAAoBC,UAAYC,EAAEC,IAAIC,QAAU,oDAEzDN,WAAWO,SAAWN,aAElBO,eAAiB,IAAIC,kBAAST,YAElCQ,eAAeE,SAAQ,eAAiB,eAIpCV,WAAWW,cACXC,SAASC,eAAeb,WAAWW,cAAcG,iBAAiB,SAAS,WACvEN,eAAeO,YAGnBf,WAAWgB,cACXJ,SAASC,eAAeb,WAAWgB,cAAcF,iBAAiB,SAAS,WACvEN,eAAeS,cAGnBjB,WAAWkB,gBACXN,SAASC,eAAeb,WAAWkB,gBAAgBJ,iBAAiB,SAAS,WACzEN,eAAeW,YAGnBnB,WAAWoB,iBACXR,SAASC,eAAeb,WAAWoB,iBAAiBN,iBAAiB,SAAS,WAC1EN,eAAea,iCAMZC,WAAW,IAAMtB,WAAWuB,qCAOlCC,cAAcxB,WAAWyB,WAAajB,6BAQ3BiB,iBACT,GAAKD,cAAcC"}